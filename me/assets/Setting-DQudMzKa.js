import{d as R,a as s,f as g,bj as F,m as q,c as T,s as p,z as o,x as r,L as U,M as k,h as I,o as x,bl as v,ae as E,bm as t,ar as u,R as N,Q as y,F as _,cM as h,bp as M,W as S}from"./index-xf_L3rL2.js";/* empty css                    *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css               *//* empty css                      *//* empty css                 *//* empty css                    *//* empty css                        */import{E as C,a as B}from"./index-QXvY5lb3.js";import"./strings-Bb14txJe.js";import"./index-CembtfCz.js";const G={class:"page-setting"},K=R({__name:"Setting",setup(j){U(),k();const f=s(I("header")),P=g("info"),{userInfo:i}=F(),b={name:[{required:!0,message:"This field is required"}],email:[{required:!0,message:"This field is required"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}],oldPassword:[{required:!0,message:"This field is required"}],newPassword:[{required:!0,message:"This field is required"}],confirmPassword:[{required:!0,message:"This field is required"},{validator(n,e,a){e!==l.newPassword?a(new Error("Two inputs don't match!")):a()},trigger:"blur"}]},l=q({oldPassword:"",newPassword:"",confirmPassword:""}),m=g(),V=()=>{console.log("cpwd"),m.value&&m.value.validate(async n=>{if(console.log("submit change psw"),n){console.log("submit!",n,l);const e=await h(`/customer/CustomeChangePassword?customeId=${i.CustomerId}`,{oldpassword:l.oldPassword,password:l.newPassword,confirmPassword:l.confirmPassword});e.status===200&&(m.value.resetFields(),f==null||f.showLogin()),M({type:e.status===400?"error":"success",message:e.msg})}else console.log("error submit!")})},d=q({name:i.Username||"",email:i.Email||"",gender:i.Gender||""}),w=g(),c=()=>{w.value&&w.value.validate(n=>{n?console.log("submit!",n,d):console.log("error submit!")})};return(n,e)=>(x(),T("article",G,[e[9]||(e[9]=p("header",null,[p("h1",null,"Account Setting")],-1)),o(s(B),{modelValue:P.value,"onUpdate:modelValue":e[6]||(e[6]=a=>P.value=a)},{default:r(()=>[o(s(C),{label:"Info",name:"info"},{default:r(()=>[o(s(v),{"label-position":"top",ref_key:"infoFormRef",ref:w,model:d,rules:b,onKeyup:E(c,["enter"])},{default:r(()=>[o(s(t),{label:"Name",prop:"name",required:""},{default:r(()=>[o(s(u),{modelValue:d.name,"onUpdate:modelValue":e[0]||(e[0]=a=>d.name=a)},null,8,["modelValue"])]),_:1}),o(s(t),{label:"Email",prop:"email",required:""},{default:r(()=>[o(s(u),{type:"email",modelValue:d.email,"onUpdate:modelValue":e[1]||(e[1]=a=>d.email=a)},null,8,["modelValue"])]),_:1}),o(s(t),{label:"Gender",prop:"gender"},{default:r(()=>[o(s(N),{modelValue:d.gender,"onUpdate:modelValue":e[2]||(e[2]=a=>d.gender=a)},{default:r(()=>[o(s(y),{value:"male"},{default:r(()=>e[7]||(e[7]=[_("Male")])),_:1}),o(s(y),{value:"female"},{default:r(()=>e[8]||(e[8]=[_("Female")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(s(t),null,{default:r(()=>[p("div",{class:"btn btn-dark",onClick:c},"Confirm")]),_:1})]),_:1},8,["model"])]),_:1}),o(s(C),{label:"Change Password",name:"password"},{default:r(()=>[o(s(v),{ref_key:"passwordFormRef",ref:m,"label-position":"top",model:l,rules:b,onKeyup:E(V,["enter"])},{default:r(()=>[o(s(t),{label:"Old Password",prop:"oldPassword",required:""},{default:r(()=>[o(s(u),{type:"password",modelValue:l.oldPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>l.oldPassword=a),"show-password":""},null,8,["modelValue"])]),_:1}),o(s(t),{label:"New Password",prop:"newPassword",required:""},{default:r(()=>[o(s(u),{type:"password",modelValue:l.newPassword,"onUpdate:modelValue":e[4]||(e[4]=a=>l.newPassword=a),"show-password":""},null,8,["modelValue"])]),_:1}),o(s(t),{label:"Confirm Password",prop:"confirmPassword",required:""},{default:r(()=>[o(s(u),{type:"password",modelValue:l.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=a=>l.confirmPassword=a),"show-password":""},null,8,["modelValue"])]),_:1}),o(s(t),null,{default:r(()=>[p("div",{class:"btn btn-dark",onClick:V},"Change Password")]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]))}}),Z=S(K,[["__scopeId","data-v-762d5129"]]);export{Z as default};
